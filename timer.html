<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>타이머</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            text-align: center; 
            margin: 0;
            background: linear-gradient(135deg, #e3f0ff 0%, #b3c6ff 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
        }
        #timer {
            width: 70vw;
            max-width: 320px;
            min-width: 180px;
            height: 70vw;
            max-height: 320px;
            min-height: 180px;
            font-size: 8vw;
            max-font-size: 54px;
            min-font-size: 32px;
            margin: 40px auto 24px auto;
            background: linear-gradient(135deg, #4f8cff 60%, #1e3c72 100%);
            border-radius: 50%;
            box-shadow: 0 8px 32px rgba(30,60,114,0.18), 0 2px 8px rgba(79,140,255,0.12);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: box-shadow 0.2s, background 0.3s;
            border: 6px solid #b3c6ff;
            letter-spacing: 2px;
            font-weight: 600;
            position: relative;
            cursor: pointer;
            user-select: none;
        }
        #timer.active {
            box-shadow: 0 0 0 12px #ff4f4f44 inset, 0 8px 32px rgba(255,79,79,0.18);
            background: linear-gradient(135deg, #ff4f4f 60%, #8b2727 100%);
            border-color: #ff4f4f;
        }
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 18px;
            flex-wrap: wrap;
        }
        button { 
            font-size: 5vw;
            min-font-size: 18px;
            max-font-size: 22px;
            margin: 6px 4px;
            padding: 12px 0;
            width: 28vw;
            min-width: 90px;
            max-width: 140px;
            border: none;
            border-radius: 28px;
            background: linear-gradient(90deg, #4f8cff 60%, #1e90ff 100%);
            color: #fff;
            cursor: pointer;
            transition: background 0.2s, transform 0.1s;
            box-shadow: 0 2px 8px rgba(79,140,255,0.10);
            font-weight: 500;
        }
        button:hover, button:active {
            background: linear-gradient(90deg, #1e90ff 60%, #4f8cff 100%);
            transform: translateY(-2px) scale(1.04);
        }
        @media (max-width: 600px) {
            #timer {
                width: 80vw;
                height: 80vw;
                font-size: 10vw;
                margin: 24px auto 16px auto;
            }
            button {
                font-size: 6vw;
                min-width: 80px;
                max-width: 120px;
                padding: 10px 0;
            }
            .btn-group {
                gap: 4px;
                margin-bottom: 12px;
            }
        }
    </style>
</head>
<body>
    <div id="timer" onclick="stopAllSounds()" title="알람 종료">00:00:00</div>
    <div class="btn-group">
        <button onclick="addMinutes(10)">+10분</button>
        <button onclick="addMinutes(1)">+1분</button>
        <button onclick="addSeconds(10)">+10초</button>
    </div>
    <div class="btn-group">
        <button id="startPauseBtn" onclick="toggleTimer()">시작</button>
        <button onclick="resetTimer()">초기화</button>
    </div>
    <audio id="alarmSound" src="end.mp3"></audio>
    <audio id="fiveSecSound" src="https://drive.google.com/uc?export=download&id=1ftTZlK7_AmCxXaoKnz_g7vDbNfbHewXZ"></audio>
    <audio id="fiveMinSound" src="fiveMin.mp3"></audio>
    <audio id="tenMinSound" src="tenMin.mp3"></audio>
    <script>
        let timer;
        let seconds = 0;
        let isRunning = false;
        const alarm = document.getElementById('alarmSound');
        const fiveSec = document.getElementById('fiveSecSound');
        const fiveMin = document.getElementById('fiveMinSound');
        const tenMin = document.getElementById('tenMinSound');
        let fiveSecPlayed = false;
        let fiveMinPlayed = false;
        let tenMinPlayed = false;
        let audioUnlocked = false;

        function updateDisplay() {
            const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
            const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
            const secs = String(seconds % 60).padStart(2, '0');
            document.getElementById('timer').textContent = `${hrs}:${mins}:${secs}`;
        }

        function unlockAudio() {
            if (!audioUnlocked) {
                alarm.play().then(() => {
                    alarm.pause();
                    alarm.currentTime = 0;
                }).catch(()=>{});
                fiveSec.play().then(() => {
                    fiveSec.pause();
                    fiveSec.currentTime = 0;
                }).catch(()=>{});
                fiveMin.play().then(() => {
                    fiveMin.pause();
                    fiveMin.currentTime = 0;
                }).catch(()=>{});
                tenMin.play().then(() => {
                    tenMin.pause();
                    tenMin.currentTime = 0;
                }).catch(()=>{});
                audioUnlocked = true;
            }
        }

        function toggleTimer() {
            unlockAudio();
            if (!isRunning && seconds > 0) {
                startTimer();
            } else {
                pauseTimer();
            }
            updateStartPauseBtn();
        }

        function startTimer() {
            if (!isRunning && seconds > 0) {
                isRunning = true;
                fiveSecPlayed = false;
                fiveMinPlayed = false;
                tenMinPlayed = false;
                document.getElementById('timer').classList.add('active');
                timer = setInterval(() => {
                    if (seconds > 0) {
                        seconds--;

                        // 10분(600초) 남았을 때
                        if (seconds === 600 && !tenMinPlayed) {
                            playTenMin();
                            tenMinPlayed = true;
                        }
                        // 5분(300초) 남았을 때
                        if (seconds === 300 && !fiveMinPlayed) {
                            playFiveMin();
                            fiveMinPlayed = true;
                        }
                        // 5초 남았을 때
                        if (seconds === 5 && !fiveSecPlayed) {
                            playFiveSec();
                            fiveSecPlayed = true;
                        }
                        updateDisplay();
                    } else {
                        pauseTimer();
                        playAlarm();
                        updateStartPauseBtn();
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            isRunning = false;
            clearInterval(timer);
            document.getElementById('timer').classList.remove('active');
        }

        function resetTimer() {
            pauseTimer();
            seconds = 0;
            updateDisplay();
            stopAllSounds();
            updateStartPauseBtn();
        }

        function addMinutes(min) {
            seconds += min * 60;
            if (seconds < 0) seconds = 0;
            updateDisplay();
            updateStartPauseBtn();
        }

        function addSeconds(sec) {
            seconds += sec;
            if (seconds < 0) seconds = 0;
            updateDisplay();
            updateStartPauseBtn();
        }

        function updateStartPauseBtn() {
            const btn = document.getElementById('startPauseBtn');
            if (isRunning) {
                btn.textContent = '정지';
            } else {
                btn.textContent = '시작';
            }
        }

        function playAlarm() {
            alarm.currentTime = 0;
            alarm.loop = true;
            alarm.play();
        }

        function playFiveSec() {
            fiveSec.currentTime = 0;
            fiveSec.loop = false;
            fiveSec.play();
        }

        function playFiveMin() {
            fiveMin.currentTime = 0;
            fiveMin.loop = false;
            fiveMin.play();
        }

        function playTenMin() {
            tenMin.currentTime = 0;
            tenMin.loop = false;
            tenMin.play();
        }

        function stopAllSounds() {
            alarm.pause();
            alarm.currentTime = 0;
            alarm.loop = false;
            fiveSec.pause();
            fiveSec.currentTime = 0;
            fiveMin.pause();
            fiveMin.currentTime = 0;
            tenMin.pause();
            tenMin.currentTime = 0;
        }

        updateDisplay();
        updateStartPauseBtn();
    </script>
</body>
</html>